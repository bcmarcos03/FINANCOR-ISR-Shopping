<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:form="sap.ui.layout.form">

    <Dialog
        id="hierarchySelectionDialog"
        title="{i18n>HierarchySelectionTitle}"
        contentWidth="400px"
        draggable="true"
        resizable="true">

        <content>
            <l:VerticalLayout width="100%" class="sapUiContentPadding">

                <Text
                    text="{i18n>HierarchySelectionMessage}"
                    class="sapUiSmallMarginBottom" />

                <!-- Area Selection -->
                <VBox visible="{hierarchyModel>/needsArea}" class="sapUiSmallMarginTop">
                    <Label
                        text="{i18n>AreaLabel}"
                        required="true"
                        class="sapUiTinyMarginBottom" />
                    <ComboBox
                        id="areaSelect"
                        selectedKey="{hierarchyModel>/selectedAreaKey}"
                        items="{hierarchyModel>/areas}"
                        placeholder="{i18n>SelectArea}"
                        selectionChange=".onAreaChange"
                        width="100%">
                        <core:Item
                            key="{hierarchyModel>AreaKey}"
                            text="{hierarchyModel>AreaKey} - {hierarchyModel>AreaText}" />
                    </ComboBox>
                </VBox>

                <!-- Division Selection -->
                <VBox visible="{hierarchyModel>/needsDivision}" class="sapUiSmallMarginTop">
                    <Label
                        text="{i18n>DivisionLabel}"
                        required="true"
                        class="sapUiTinyMarginBottom" />
                    <ComboBox
                        id="divisionSelect"
                        selectedKey="{hierarchyModel>/selectedDivisionKey}"
                        items="{hierarchyModel>/divisions}"
                        placeholder="{i18n>SelectDivision}"
                        selectionChange=".onDivisionChange"
                        width="100%">
                        <core:Item
                            key="{hierarchyModel>DivisionKey}"
                            text="{hierarchyModel>DivisionKey} - {hierarchyModel>DivisionText}" />
                    </ComboBox>
                </VBox>

                <!-- Family Selection -->
                <VBox visible="{hierarchyModel>/needsFamily}" class="sapUiSmallMarginTop">
                    <Label
                        text="{i18n>FamilyLabel}"
                        required="true"
                        class="sapUiTinyMarginBottom" />
                    <ComboBox
                        id="familySelect"
                        selectedKey="{hierarchyModel>/selectedFamilyKey}"
                        items="{hierarchyModel>/families}"
                        placeholder="{i18n>SelectFamily}"
                        selectionChange=".onFamilyChange"
                        width="100%">
                        <core:Item
                            key="{hierarchyModel>FamilyKey}"
                            text="{hierarchyModel>FamilyKey} - {hierarchyModel>FamilyText}" />
                    </ComboBox>
                </VBox>

                <!-- Category Selection -->
                <VBox visible="{hierarchyModel>/needsCategory}" class="sapUiSmallMarginTop">
                    <Label
                        text="{i18n>CategoryLabel}"
                        required="true"
                        class="sapUiTinyMarginBottom" />
                    <ComboBox
                        id="categorySelect"
                        selectedKey="{hierarchyModel>/selectedCategoryKey}"
                        items="{hierarchyModel>/categories}"
                        placeholder="{i18n>SelectCategory}"
                        selectionChange=".onCategoryChange"
                        width="100%">
                        <core:Item
                            key="{hierarchyModel>CategoryKey}"
                            text="{hierarchyModel>CategoryKey} - {hierarchyModel>CategoryText}" />
                    </ComboBox>
                </VBox>

                <!-- ProductGroup Selection -->
                <VBox visible="{hierarchyModel>/needsProductGroup}" class="sapUiSmallMarginTop">
                    <Label
                        text="{i18n>ProductGroupLabel}"
                        required="true"
                        class="sapUiTinyMarginBottom" />
                    <ComboBox
                        id="productGroupSelect"
                        selectedKey="{hierarchyModel>/selectedProductGroupKey}"
                        items="{hierarchyModel>/productGroups}"
                        placeholder="{i18n>SelectProductGroup}"
                        width="100%">
                        <core:Item
                            key="{hierarchyModel>ProductGroupKey}"
                            text="{hierarchyModel>ProductGroupKey} - {hierarchyModel>ProductGroupText}" />
                    </ComboBox>
                </VBox>

            </l:VerticalLayout>
        </content>

        <beginButton>
            <Button
                text="{i18n>ConfirmHierarchy}"
                type="Emphasized"
                press=".onConfirmHierarchySelection" />
        </beginButton>

        <endButton>
            <Button
                text="{i18n>Cancel}"
                press=".onCancelHierarchySelection" />
        </endButton>
    </Dialog>
</core:FragmentDefinition>
