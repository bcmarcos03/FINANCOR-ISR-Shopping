<mvc:View
    controllerName="com.financor.sd.shoppingapp.controller.Collect.CollectedPrices"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    displayBlock="true"
>
    <Page
        id="collectedPricesPage"
        title="{i18n>CollectedPricesTitle}"
        showNavButton="true"
        navButtonPress=".onNavBack"
    >
        <customHeader>
            <Bar>
                <contentLeft>
                    <Button
                        icon="sap-icon://nav-back"
                        press=".onNavBack"
                        tooltip="{i18n>BackTooltip}"
                    />
                    <Button
                        icon="sap-icon://home"
                        press=".onNavToHome"
                        tooltip="{i18n>HomeTooltip}"
                    />
                </contentLeft>
                <contentMiddle>
                    <Title text="{i18n>CollectedPricesTitle}" />
                </contentMiddle>
                <contentRight>
                    <Button
                        id="btnRefresh"
                        icon="sap-icon://refresh"
                        press=".onRefresh"
                        tooltip="{i18n>RefreshTooltip}"
                    />
                </contentRight>
            </Bar>
        </customHeader>

        <subHeader>
            <Toolbar>
                <SearchField
                    id="searchField"
                    width="100%"
                    placeholder="{i18n>SearchPlaceholder}"
                    liveChange=".onSearch"
                />
            </Toolbar>
        </subHeader>

        <content>
            <List
                id="collectedPricesList"
                items="{collectedModel>/items}"
                noDataText="{i18n>NoCollectedPrices}"
                mode="Delete"
                delete=".onDeleteItem"
            >
                <items>
                    <ObjectListItem
                        id="collectedPriceItem"
                        title="{collectedModel>MaterialDescription}"
                        intro="{
                            path: 'collectedModel>CollectedDate',
                            formatter: '.formatCollectedDate'
                        }"
                        number="{
                            path: 'collectedModel>NormalPrice',
                            formatter: '.formatPrice'
                        }"
                        numberUnit="EUR"
                        type="Active"
                        press=".onItemPress"
                        introTextDirection="Inherit"
                    >
                        <firstStatus>
                            <ObjectStatus
                                id="customerStatus"
                                text="{collectedModel>CustomerName}"
                                state="Information"
                            />
                        </firstStatus>
                        <markers>
                            <ObjectMarker
                                id="promoMarker"
                                type="{= ${collectedModel>PromoPrice} ? 'Flagged' : '' }"
                                visibility="{= ${collectedModel>PromoPrice} ? 'IconAndText' : 'IconOnly' }"
                            />
                        </markers>
                        <attributes>
                            <ObjectAttribute
                                id="areaAttribute"
                                title="{i18n>AreaLabel}"
                                text="{collectedModel>AreaText}"
                            />
                            <ObjectAttribute
                                id="divisionAttribute"
                                title="{i18n>DivisionLabel}"
                                text="{collectedModel>DivisionText}"
                            />
                            <ObjectAttribute
                                id="familyAttribute"
                                title="{i18n>FamilyLabel}"
                                text="{collectedModel>FamilyText}"
                            />
                            <ObjectAttribute
                                id="categoryAttribute"
                                title="{i18n>CategoryLabel}"
                                text="{collectedModel>CategoryText}"
                            />
                            <ObjectAttribute
                                id="brandAttribute"
                                title="{i18n>BrandLabel}"
                                text="{collectedModel>Brand}"
                            />
                            <ObjectAttribute
                                id="promoPriceAttribute"
                                title="{i18n>PromoPriceLabel}"
                                text="{
                                    path: 'collectedModel>PromoPrice',
                                    formatter: '.formatPromoPrice'
                                }"
                                visible="{= !!${collectedModel>PromoPrice} }"
                            />
                        </attributes>
                    </ObjectListItem>
                </items>
            </List>
        </content>

        <footer>
            <OverflowToolbar>
                <Button
                    id="btnDeleteAll"
                    text="{i18n>DeleteAllButton}"
                    icon="sap-icon://delete"
                    type="Reject"
                    press=".onDeleteAll"
                    enabled="{= ${collectedModel>/count} > 0 }"
                />
                <ToolbarSpacer />
                <Label text="{i18n>TotalCollected}:" />
                <ObjectNumber
                    number="{collectedModel>/count}"
                    unit="{i18n>ItemsLabel}"
                    emphasized="true"
                />
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>
